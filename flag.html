<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Selected Country</title>
    <style>
        body {
            font-family: sans-serif;
            height: 100%;
            margin: 0;
            background-color: grey;
        }
        footer {
            font-family: sans-serif;
            position: absolute;
            bottom: 0px;
            background: #ffffffaa;
        }
        #flag {
            width: 100%;
            max-width: 100vw;
            height: 100%;
            max-height: 100vh;
        }
    </style>
</head>

<body>
    <img id="flag" src="" alt="No country selected">

    <script>
        function updateCountry() {
            const flagImg = document.getElementById("flag");
            const stored = localStorage.getItem("selectedCountry");
            if (stored) {
                const data = JSON.parse(stored);
                const code = data.iso2.toLowerCase();
                flagImg.src = `flags/${code}.svg`;
                flagImg.style.display = "block"
            } else {
                flagImg.style.display = "none"
            }
        }

        window.addEventListener("DOMContentLoaded", () => {
            updateCountry();
        });

        window.addEventListener("storage", e => {
            if (e.key === "selectedCountry") updateCountry();
        });
    </script>
</body>
<footer>Flag icons thanks to <a href="https://flagpedia.net">flagpedia.net</a></footer>
</html>
